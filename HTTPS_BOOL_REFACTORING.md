# ‚úÖ –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥: EnableHTTPS —Å string –Ω–∞ bool

## üéØ –ü—Ä–æ–±–ª–µ–º–∞

–í –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è `string` —Ç–∏–ø –¥–ª—è –ø–æ–ª—è `EnableHTTPS`, —á—Ç–æ —Å–æ–∑–¥–∞–≤–∞–ª–æ –ø—É—Ç–∞–Ω–∏—Ü—É:

```go
// ‚ùå –ë–´–õ–û: –ù–µ–∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ –∏ –ø–æ–¥–≤–µ—Ä–∂–µ–Ω–æ –æ—à–∏–±–∫–∞–º
EnableHTTPS string `env:"ENABLE_HTTPS"`

// –ü—Ä–æ–≤–µ—Ä–∫–∞: –ª—é–±–∞—è –Ω–µ–ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ = true
func (c *Config) IsHTTPSEnabled() bool {
    return c.EnableHTTPS != ""
}
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ùå –ù–µ–∏–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–π API: `"false"` –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞–ª–æ—Å—å –∫–∞–∫ `true`
- ‚ùå –ù–∞—Ä—É—à–µ–Ω–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø–∞ –Ω–∞–∏–º–µ–Ω—å—à–µ–≥–æ —É–¥–∏–≤–ª–µ–Ω–∏—è
- ‚ùå –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ª—É—á—à–∏–º –ø—Ä–∞–∫—Ç–∏–∫–∞–º Go
- ‚ùå –ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å: –≤ JSON –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è `*bool`, –≤ Config - `string`

## ‚ö° –†–µ—à–µ–Ω–∏–µ

### 1. ‚úÖ –ò–∑–º–µ–Ω–µ–Ω —Ç–∏–ø —Å string –Ω–∞ bool

```go
// ‚úÖ –°–¢–ê–õ–û: –ü–æ–Ω—è—Ç–Ω–æ –∏ —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ
EnableHTTPS bool `env:"ENABLE_HTTPS"`

// –ü—Ä–æ—Å—Ç–∞—è –∏ –ø–æ–Ω—è—Ç–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
func (c *Config) IsHTTPSEnabled() bool {
    return c.EnableHTTPS
}
```

### 2. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω —Ñ–ª–∞–≥ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏

```go
// –î–û
flag.StringVar(&cfg.EnableHTTPS, "s", cfg.EnableHTTPS, "–≤–∫–ª—é—á–∏—Ç—å HTTPS —Å–µ—Ä–≤–µ—Ä")

// –ü–û–°–õ–ï
flag.BoolVar(&cfg.EnableHTTPS, "s", cfg.EnableHTTPS, "–≤–∫–ª—é—á–∏—Ç—å HTTPS —Å–µ—Ä–≤–µ—Ä")
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
# –í–∫–ª—é—á–∏—Ç—å HTTPS
./shortener -s

# –û—Ç–∫–ª—é—á–∏—Ç—å HTTPS (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
./shortener
```

### 3. ‚úÖ –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–∞ JSON –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```go
type JSONConfig struct {
    // –¢–µ–ø–µ—Ä—å –≤–µ–∑–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è bool
    EnableHTTPS *bool `json:"enable_https,omitempty"`
}
```

## üìä –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ API

### –§–ª–∞–≥–∏ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
```bash
# –î–û - –ª—é–±–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤–∫–ª—é—á–∞–ª–æ HTTPS
./shortener -s anything  # HTTPS –≤–∫–ª—é—á–µ–Ω
./shortener -s ""        # HTTPS –æ—Ç–∫–ª—é—á–µ–Ω

# –ü–û–°–õ–ï - —á–µ—Ç–∫–∏–π –±—É–ª–µ–≤—ã–π —Ñ–ª–∞–≥
./shortener -s           # HTTPS –≤–∫–ª—é—á–µ–Ω
./shortener              # HTTPS –æ—Ç–∫–ª—é—á–µ–Ω (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
# –î–û - –ª—é–±–æ–µ –Ω–µ–ø—É—Å—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
export ENABLE_HTTPS="false"  # ‚ùå –í–∫–ª—é—á–∞–µ—Ç HTTPS!
export ENABLE_HTTPS="no"     # ‚ùå –í–∫–ª—é—á–∞–µ—Ç HTTPS!
export ENABLE_HTTPS=""       # ‚úÖ –û—Ç–∫–ª—é—á–∞–µ—Ç HTTPS

# –ü–û–°–õ–ï - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –±—É–ª–µ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
export ENABLE_HTTPS=true     # ‚úÖ –í–∫–ª—é—á–∞–µ—Ç HTTPS
export ENABLE_HTTPS=false    # ‚úÖ –û—Ç–∫–ª—é—á–∞–µ—Ç HTTPS
export ENABLE_HTTPS=1        # ‚úÖ –í–∫–ª—é—á–∞–µ—Ç HTTPS
export ENABLE_HTTPS=0        # ‚úÖ –û—Ç–∫–ª—é—á–∞–µ—Ç HTTPS
```

### JSON –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```json
// –î–û - –Ω–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å —Ç–∏–ø–æ–≤
{
  "enable_https": true  // bool –≤ JSON
}
// Config.EnableHTTPS = "true"  // string –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ

// –ü–û–°–õ–ï - –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ
{
  "enable_https": true  // bool –≤ JSON
}  
// Config.EnableHTTPS = true    // bool –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ
```

## üß™ –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

### Unit —Ç–µ—Å—Ç—ã
```go
// –î–û
tests := []struct {
    enableHTTPS string
    expected    bool
}{
    {"", false},      // –ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ = false
    {"true", true},   // –õ—é–±–∞—è —Å—Ç—Ä–æ–∫–∞ = true
    {"false", true},  // ‚ùå "false" = true!
}

// –ü–û–°–õ–ï  
tests := []struct {
    enableHTTPS bool
    expected    bool
}{
    {false, false},   // ‚úÖ –ß–µ—Ç–∫–æ –∏ –ø–æ–Ω—è—Ç–Ω–æ
    {true, true},     // ‚úÖ –ß–µ—Ç–∫–æ –∏ –ø–æ–Ω—è—Ç–Ω–æ
}
```

### –ü–∞—Ä—Å–∏–Ω–≥ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
```go
// –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ strconv.ParseBool
if httpsEnv := os.Getenv("ENABLE_HTTPS"); httpsEnv != "" {
    enabled, err := strconv.ParseBool(httpsEnv)
    if err == nil {
        config.EnableHTTPS = enabled
    }
}
```

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –ö–æ–º–ø–∏–ª—è—Ü–∏—è
```bash
$ go build -o shortener ./cmd/shortener  ‚úÖ
$ go build -o api ./cmd/api              ‚úÖ
```

### Unit —Ç–µ—Å—Ç—ã
```bash
$ go test ./internal/config
ok      github.com/InQaaaaGit/trunc_url.git/internal/config
```

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
```bash
$ ./shortener -s
# –ü–æ–ø—ã—Ç–∫–∞ –∑–∞–ø—É—Å–∫–∞ HTTPS —Å–µ—Ä–≤–µ—Ä–∞ ‚úÖ

$ ./shortener  
# –ó–∞–ø—É—Å–∫ HTTP —Å–µ—Ä–≤–µ—Ä–∞ ‚úÖ
```

## üöÄ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

### 1. **–¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
- ‚úÖ –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫–∏ —Ç–∏–ø–æ–≤
- ‚úÖ IDE –ø–æ–¥—Å–∫–∞–∑–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–ª—è –±—É–ª–µ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π

### 2. **–ò–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ—Å—Ç—å**
- ‚úÖ `true` = –≤–∫–ª—é—á–µ–Ω–æ, `false` = –æ—Ç–∫–ª—é—á–µ–Ω–æ
- ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–∂–∏–¥–∞–Ω–∏—è–º —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
- ‚úÖ –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ Go —Ñ–ª–∞–≥–æ–≤

### 3. **–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å**
- ‚úÖ –ï–¥–∏–Ω—ã–π —Ç–∏–ø –≤–æ –≤—Å–µ—Ö —á–∞—Å—Ç—è—Ö —Å–∏—Å—Ç–µ–º—ã
- ‚úÖ JSON –∏ Config –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–∏–Ω —Ç–∏–ø
- ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ Go –∫–æ–Ω–≤–µ–Ω—Ü–∏—è–º

### 4. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
- ‚úÖ –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —Å–ª—É—á–∞–π–Ω–æ –≤–∫–ª—é—á–∏—Ç—å HTTPS —Å—Ç—Ä–æ–∫–æ–π "false"
- ‚úÖ –Ø—Å–Ω–∞—è —Å–µ–º–∞–Ω—Ç–∏–∫–∞ –≤–∫–ª—é—á–µ–Ω–∏—è/–æ—Ç–∫–ª—é—á–µ–Ω–∏—è
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

## üìù Migration Guide

–ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ —Å—Ç–∞—Ä—ã–π API:

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
# –î–û
export ENABLE_HTTPS="any-value"

# –ü–û–°–õ–ï  
export ENABLE_HTTPS=true
```

### –§–ª–∞–≥–∏ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
```bash
# –î–û
./app -s "any-value"

# –ü–û–°–õ–ï
./app -s
```

### –ü—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π –∫–æ–¥
```go
// –î–û
if config.EnableHTTPS != "" {
    // HTTPS –≤–∫–ª—é—á–µ–Ω
}

// –ü–û–°–õ–ï
if config.EnableHTTPS {
    // HTTPS –≤–∫–ª—é—á–µ–Ω
}
```

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

‚úÖ **–£—Å—Ç—Ä–∞–Ω–µ–Ω–∞ –ø—É—Ç–∞–Ω–∏—Ü–∞** - –±—É–ª–µ–≤—ã–π —Ç–∏–ø –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ –ø–æ–Ω—è—Ç–µ–Ω

‚úÖ **–£–ª—É—á—à–µ–Ω–∞ —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫–∏

‚úÖ **–î–æ—Å—Ç–∏–≥–Ω—É—Ç–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å** - –µ–¥–∏–Ω—ã–π —Ç–∏–ø –≤–æ –≤—Å–µ–π —Å–∏—Å—Ç–µ–º–µ

‚úÖ **–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º Go** - –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

–¢–µ–ø–µ—Ä—å EnableHTTPS —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ª—É—á—à–∏–º –ø—Ä–∞–∫—Ç–∏–∫–∞–º Go! 
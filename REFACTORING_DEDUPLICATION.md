# ‚úÖ –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥: –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞ –º–µ–∂–¥—É cmd/api –∏ cmd/shortener

## üéØ –ü—Ä–æ–±–ª–µ–º–∞

–ë—ã–ª–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –º–µ–∂–¥—É `cmd/api/main.go` –∏ `cmd/shortener/main.go`, –≤–∫–ª—é—á–∞—é—â–µ–µ:

1. **Build info –ª–æ–≥–∏–∫—É** - –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –≤—ã–≤–æ–¥–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–±–æ—Ä–∫–µ
2. **–õ–æ–≥–∏–∫—É –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤** - –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ HTTP/HTTPS –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –∑–∞–ø—É—Å–∫–∞
3. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π** - –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–π—Å—è –∫–æ–¥ –¥–ª—è –ª–æ–≥–≥–µ—Ä–∞ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

## ‚ö° –†–µ—à–µ–Ω–∏–µ

### 1. ‚úÖ –°–æ–∑–¥–∞–Ω –ø–∞–∫–µ—Ç `internal/buildinfo`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Å–±–æ—Ä–∫–µ (–≤–µ—Ä—Å–∏—è, –¥–∞—Ç–∞, commit)
- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ build info
- –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

**API:**
```go
// –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–±–æ—Ä–∫–µ
info := buildinfo.NewInfo(version, date, commit)
info := buildinfo.DefaultInfo()

// –í—ã–≤–æ–¥ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
info.Print()                    // –í—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª—å
str := info.String()           // –°—Ç—Ä–æ–∫–æ–≤–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ
```

### 2. ‚úÖ –°–æ–∑–¥–∞–Ω –ø–∞–∫–µ—Ç `internal/server`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –ò–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è –ª–æ–≥–∏–∫–∏ –∑–∞–ø—É—Å–∫–∞ HTTP/HTTPS —Å–µ—Ä–≤–µ—Ä–æ–≤
- –û–±—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ (–ª–æ–≥–≥–µ—Ä, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å `Starter` –¥–ª—è —Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç–∏

**API:**
```go
// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
logger, cleanup := server.InitLogger()
cfg := server.InitConfig(logger)

// –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
httpServer := server.NewHTTPServer(server, cfg, logger)
err := httpServer.Start()
```

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

### ‚¨áÔ∏è –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è

**–î–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:**
- `cmd/api/main.go`: 99 —Å—Ç—Ä–æ–∫
- `cmd/shortener/main.go`: 75 —Å—Ç—Ä–æ–∫
- **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–¥–∞**: ~50 —Å—Ç—Ä–æ–∫

**–ü–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:**
- `cmd/api/main.go`: 64 —Å—Ç—Ä–æ–∫–∏ (-35 —Å—Ç—Ä–æ–∫)
- `cmd/shortener/main.go`: 39 —Å—Ç—Ä–æ–∫ (-36 —Å—Ç—Ä–æ–∫)
- **–û–±—â–∏–µ –ø–∞–∫–µ—Ç—ã**: 
  - `internal/buildinfo`: 40+ —Å—Ç—Ä–æ–∫
  - `internal/server`: 70+ —Å—Ç—Ä–æ–∫

### ‚úÖ –£–ª—É—á—à–µ–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

1. **–ü—Ä–∏–Ω—Ü–∏–ø DRY (Don't Repeat Yourself)**
   - –£—Å—Ç—Ä–∞–Ω–µ–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ build info –ª–æ–≥–∏–∫–∏
   - –í—ã–Ω–µ—Å–µ–Ω–∞ –æ–±—â–∞—è –ª–æ–≥–∏–∫–∞ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤

2. **–ü—Ä–∏–Ω—Ü–∏–ø Single Responsibility**
   - `buildinfo` - —Ç–æ–ª—å–∫–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Å–±–æ—Ä–∫–µ
   - `server` - —Ç–æ–ª—å–∫–æ –ª–æ–≥–∏–∫–∞ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤

3. **–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ—Å—Ç—å**
   - –ù–æ–≤—ã–µ –ø–∞–∫–µ—Ç—ã –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ –¥—Ä—É–≥–∏—Ö —á–∞—Å—Ç—è—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
   - –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ cmd –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## üîß –î–µ—Ç–∞–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### cmd/api/main.go
```go
// –î–û
func printBuildInfo() { /* –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ */ }
// –ª–æ–≥–∏–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ª–æ–≥–≥–µ—Ä–∞, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
// –ª–æ–≥–∏–∫–∞ –∑–∞–ø—É—Å–∫–∞ HTTP/HTTPS —Å–µ—Ä–≤–µ—Ä–∞

// –ü–û–°–õ–ï  
buildInfo := buildinfo.NewInfo(buildVersion, buildDate, buildCommit)
buildInfo.Print()

logger, cleanup := server.InitLogger()
cfg := server.InitConfig(logger)

serverWrapper := server.NewHTTPServer(httpServer, cfg, logger)
serverWrapper.Start()
```

### cmd/shortener/main.go
```go
// –î–û
func printBuildInfo() { /* –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ */ }
// –ª–æ–≥–∏–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ª–æ–≥–≥–µ—Ä–∞, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏  
// —É—Å–ª–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ HTTP/HTTPS –∑–∞–ø—É—Å–∫–∞

// –ü–û–°–õ–ï
buildInfo := buildinfo.NewInfo(buildVersion, buildDate, buildCommit)
buildInfo.Print()

logger, cleanup := server.InitLogger()
cfg := server.InitConfig(logger)

httpServer := server.NewHTTPServer(application.GetServer(), cfg, logger)
httpServer.Start()
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### ‚úÖ Unit —Ç–µ—Å—Ç—ã
```bash
$ go test ./internal/buildinfo
ok      github.com/InQaaaaGit/trunc_url.git/internal/buildinfo

# –ü–æ–∫—Ä—ã—Ç–∏–µ –≤—Å–µ—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- TestDefaultInfo
- TestNewInfo  
- TestString
- TestPrint
```

### ‚úÖ Example —Ç–µ—Å—Ç—ã
```bash
$ go test -v ./internal/buildinfo -run "Example"
=== RUN   ExampleDefaultInfo
--- PASS: ExampleDefaultInfo (0.00s)
=== RUN   ExampleNewInfo
--- PASS: ExampleNewInfo (0.00s)  
=== RUN   ExampleInfo_String
--- PASS: ExampleInfo_String (0.00s)
```

### ‚úÖ –ö–æ–º–ø–∏–ª—è—Ü–∏—è
```bash
$ go build -o api ./cmd/api
$ go build -o shortener ./cmd/shortener
# –û–±–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –∫–æ–º–ø–∏–ª–∏—Ä—É—é—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
```

### ‚úÖ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
```bash
$ ./shortener --help
Build version: N/A
Build date: N/A
Build commit: N/A
# –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, build info –≤—ã–≤–æ–¥–∏—Ç—Å—è
```

## üöÄ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **Maintainability** - –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ª–æ–≥–∏–∫–µ build info –∏–ª–∏ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –¥–µ–ª–∞—é—Ç—Å—è –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ
2. **Testability** - –Ω–æ–≤—ã–µ –ø–∞–∫–µ—Ç—ã –ª–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ
3. **Extensibility** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ cmd –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –±–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞
4. **Code Quality** - —É–ª—É—á—à–µ–Ω–∞ —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞

## üìÅ –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
internal/
‚îú‚îÄ‚îÄ buildinfo/           # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Å–±–æ—Ä–∫–µ
‚îÇ   ‚îú‚îÄ‚îÄ buildinfo.go
‚îÇ   ‚îú‚îÄ‚îÄ buildinfo_test.go
‚îÇ   ‚îî‚îÄ‚îÄ example_test.go
‚îú‚îÄ‚îÄ server/              # –õ–æ–≥–∏–∫–∞ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ server.go
‚îî‚îÄ‚îÄ ...

cmd/
‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îî‚îÄ‚îÄ main.go         # –£–ø—Ä–æ—â–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–±—â–∏–µ –ø–∞–∫–µ—Ç—ã
‚îî‚îÄ‚îÄ shortener/
    ‚îî‚îÄ‚îÄ main.go         # –£–ø—Ä–æ—â–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–±—â–∏–µ –ø–∞–∫–µ—Ç—ã
```

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ **–£—Å—Ç—Ä–∞–Ω–µ–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞** - –æ–±—â–∞—è –ª–æ–≥–∏–∫–∞ –≤—ã–Ω–µ—Å–µ–Ω–∞ –≤ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–∞–∫–µ—Ç—ã

‚úÖ **–£–ª—É—á—à–µ–Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** - —Å–æ–±–ª—é–¥–µ–Ω—ã –ø—Ä–∏–Ω—Ü–∏–ø—ã SOLID –∏ DRY  

‚úÖ **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å** - –≤—Å–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ –ø—Ä–µ–∂–¥–µ

‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç—ã** - –Ω–æ–≤—ã–µ –ø–∞–∫–µ—Ç—ã –ø–æ–∫—Ä—ã—Ç—ã unit –∏ example —Ç–µ—Å—Ç–∞–º–∏

‚úÖ **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ cmd –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è 